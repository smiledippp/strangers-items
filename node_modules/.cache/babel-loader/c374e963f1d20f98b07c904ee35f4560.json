{"ast":null,"code":"var _jsxFileName = \"/home/menou/course-work/strangers-things/strangers-items/src/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Switch, Link } from 'react-router-dom';\nimport { Nav, NewPost, createPost, Homepage, Login } from './components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [token, setToken] = useState(\"\");\n  const [userData, setUserData] = useState({});\n  const [posts, setPosts] = useState([]);\n\n  const fetchUserData = async token => {\n    const {\n      data\n    } = await callApi({\n      url: \"/users/me\",\n      token\n    });\n    return data;\n  };\n\n  const fetchPosts = async () => {\n    const {\n      data: {\n        posts\n      }\n    } = await callApi({\n      url: \"/posts\"\n    });\n    return posts;\n  };\n\n  useEffect(async () => {\n    if (!token) {\n      setToken(localStorage.getItem(\"token\"));\n      return;\n    }\n\n    const data = await fetchUserData(token);\n\n    if (data && data.username) {\n      setUserData(data);\n    }\n  }, [token]);\n  useEffect(async () => {\n    const posts = await fetchPosts();\n    setPosts(posts);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"header\",\n      children: [userData.username && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Welcome back to Stranger's Things \", userData.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }, this), !userData.username && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Welcome to Stranger's Things\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 34\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Nav, {\n      token: token\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/posts\",\n        children: /*#__PURE__*/_jsxDEV(Posts, {\n          posts: posts,\n          token: token,\n          setPosts: setPosts,\n          userData: userData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/profile\",\n        children: /*#__PURE__*/_jsxDEV(Profile, {\n          userData: userData,\n          token: token\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/posts/new\",\n        children: /*#__PURE__*/_jsxDEV(NewPost, {\n          token: token,\n          setPosts: setPosts,\n          posts: posts,\n          action: \"add\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/posts/:postId/edit\",\n        children: /*#__PURE__*/_jsxDEV(NewPost, {\n          token: token,\n          setPosts: setPosts,\n          posts: posts,\n          action: \"edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/posts/:postId\",\n        children: /*#__PURE__*/_jsxDEV(\"newPost\", {\n          posts: posts,\n          token: token\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/register\",\n        children: /*#__PURE__*/_jsxDEV(\"newAccount\", {\n          action: \"register\",\n          setToken: setToken,\n          setUserData: setUserData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        children: /*#__PURE__*/_jsxDEV(Login, {\n          action: \"login\",\n          setToken: setToken,\n          setUserData: setUserData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(App, \"vfttepx0Ub75BK3CP9Jwj3m3B+g=\");\n\n_c = App;\nReactDOM.render( /*#__PURE__*/_jsxDEV(Router, {\n  children: /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 7\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 113,\n  columnNumber: 5\n}, this), document.getElementById(\"app\"));\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","ReactDOM","BrowserRouter","Router","Route","Switch","Link","Nav","NewPost","createPost","Homepage","Login","App","token","setToken","userData","setUserData","posts","setPosts","fetchUserData","data","callApi","url","fetchPosts","localStorage","getItem","username","render","document","getElementById"],"sources":["/home/menou/course-work/strangers-things/strangers-items/src/index.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router, Route, Switch, Link } from 'react-router-dom';\nimport {\n    Nav,\n    NewPost,\n    createPost,\n    Homepage,\n    Login\n\n} from './components';\n\nconst App = () => {\n    const [token, setToken] = useState(\"\");\n    const [userData, setUserData] = useState({});\n    const [posts, setPosts] = useState([]);\n  \n    const fetchUserData = async (token) => {\n      const { data } = await callApi({\n        url: \"/users/me\",\n        token,\n      });\n      return data;\n    };\n  \n    const fetchPosts = async () => {\n      const {\n        data: { posts },\n      } = await callApi({\n        url: \"/posts\",\n      });\n      return posts;\n    };\n  \n    useEffect(async () => {\n      if (!token) {\n        setToken(localStorage.getItem(\"token\"));\n        return;\n      }\n      const data = await fetchUserData(token);\n      if (data && data.username) {\n        setUserData(data);\n      }\n    }, [token]);\n  \n    useEffect(async () => {\n      const posts = await fetchPosts();\n      setPosts(posts);\n    }, []);\n  \n    return (\n      <>\n        <div id=\"header\">\n          {userData.username && (\n            <p>Welcome back to Stranger's Things {userData.username}</p>\n          )}\n          {!userData.username && <p>Welcome to Stranger's Things</p>}\n        </div>\n        <Nav token={token} />\n        <div>\n          <Route exact path=\"/\"></Route>\n  \n          <Route exact path=\"/posts\">\n            <Posts\n              posts={posts}\n              token={token}\n              setPosts={setPosts}\n              userData={userData}\n            />\n          </Route>\n          <Route path=\"/profile\">\n            <Profile userData={userData} token={token} />\n          </Route>\n          <Route path=\"/posts/new\">\n            <NewPost\n              token={token}\n              setPosts={setPosts}\n              posts={posts}\n              action=\"add\"\n            />\n          </Route>\n          <Route path=\"/posts/:postId/edit\">\n            <NewPost\n              token={token}\n              setPosts={setPosts}\n              posts={posts}\n              action=\"edit\"\n            />\n          </Route>\n          <Route path=\"/posts/:postId\">\n            <newPost posts={posts} token={token} />\n          </Route>\n          <Route path=\"/register\">\n            <newAccount\n              action=\"register\"\n              setToken={setToken}\n              setUserData={setUserData}\n            />\n          </Route>\n          <Route path=\"/login\">\n            <Login\n              action=\"login\"\n              setToken={setToken}\n              setUserData={setUserData}\n            />\n          </Route>\n          </div>\n      </>\n    );\n  };\n  \n  ReactDOM.render(\n    <Router>\n      <App />\n    </Router>,\n    document.getElementById(\"app\")\n  );"],"mappings":"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"},"metadata":{},"sourceType":"module"}